<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="brand">
        <img src="assets/lr.jpeg" alt="LeaseRight Logo" class="logo">
        <h1>Lease Request</h1>
      </div>
      <div class="user-section">
        <app-profile-dropdown
          [userName]="userName"
          [userRole]="'Admin Dashboard'"
          [menuItems]="profileMenuItems"
          (menuItemClick)="onProfileMenuClick($event)"
          (logoutClick)="logout()">
        </app-profile-dropdown>
      </div>
    </div>
  </header>

  <!-- Account Details Section -->
  <div class="dashboard-main" *ngIf="showAccountDetails">
    <app-account-details [userRole]="'admin'"></app-account-details>
    <div style="text-align: center; margin-top: 20px;">
      <button class="action-btn" (click)="closeAccountDetails()">
        <i class="fas fa-arrow-left"></i>
        Back to Dashboard
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="dashboard-main" *ngIf="!showAccountDetails">
    <div class="welcome-section">
      <h2>Welcome back, {{ userName }}! ðŸ‘‹</h2>
      <p>Manage companies, vendors, and lease activity across the platform</p>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon company">
          <i class="fas fa-building"></i>
        </div>
        <div class="stat-details">
          <h3>Total Companies</h3>
          <p class="stat-number">{{ stats.totalCompanies }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon company">
          <i class="fas fa-user-tie"></i>
        </div>
        <div class="stat-details">
          <h3>Total Vendors</h3>
          <p class="stat-number">{{ stats.totalVendors }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon company" style="background: linear-gradient(135deg, #ffc107, #ff9800);">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-details">
          <h3>Pending Requests</h3>
          <p class="stat-number">{{ stats.pendingRequests }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon company" style="background: linear-gradient(135deg, #28a745, #20c997);">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="stat-details">
          <h3>System Health</h3>
          <p class="stat-number">98%</p>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="actions-section">
      <h3>Quick Actions</h3>
      <div class="actions-grid">
        <button class="action-btn company" type="button">
          <i class="fas fa-users"></i>
          Manage Users
        </button>
        <button class="action-btn company" type="button">
          <i class="fas fa-user-check"></i>
          Vendor Approvals
        </button>
        <button class="action-btn company" type="button">
          <i class="fas fa-file-invoice-dollar"></i>
          View Transactions
        </button>
      </div>
    </div>

    <!-- Pending Vendor Approvals -->
    <div class="requests-section" style="margin-top: 30px;">
      <h3>Pending Vendor Approvals</h3>
      <div class="requests-table" *ngIf="vendors.length > 0; else noVendors">
        <div class="request-card" *ngFor="let v of vendors">
          <div class="request-header">
            <div class="request-title">
              <h4>{{ v.companyName }}</h4>
              <span class="status-badge status-pending">
                <i class="fas fa-clock"></i>
                Pending
              </span>
            </div>
            <span class="request-date">{{ v.createdAt || '' }}</span>
          </div>
          <div class="request-details">
            <div class="detail-item">
              <i class="fas fa-user-tie"></i>
              <span>{{ v.firstName }} {{ v.lastName }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-envelope"></i>
              <span>{{ v.email }}</span>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noVendors>
        <p class="no-data">
          <i class="fas fa-info-circle"></i>
          No pending vendor approvals.
        </p>
      </ng-template>
    </div>

    <!-- Recent Activity -->
    <div class="requests-section" style="margin-top: 30px;">
      <h3>Recent Activity</h3>
      <div class="requests-table" *ngIf="companies.length > 0; else noActivity">
        <div class="request-card" *ngFor="let c of companies | slice:0:3">
          <div class="request-header">
            <div class="request-title">
              <h4>New company registered: {{ c.companyName }}</h4>
            </div>
          </div>
          <div class="request-details">
            <div class="detail-item">
              <i class="fas fa-envelope"></i>
              <span>{{ c.email }}</span>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noActivity>
        <p class="no-data">
          <i class="fas fa-info-circle"></i>
          No recent activity yet.
        </p>
      </ng-template>
    </div>
  </main>
</div>

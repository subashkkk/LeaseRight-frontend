<div class="account-details-container">
  <div class="account-header">
    <div>
      <h2><i class="fas fa-user-circle"></i> Account Details</h2>
      <p class="account-subtitle">Manage your personal information</p>
    </div>
    <button 
      class="btn-edit" 
      (click)="toggleEdit()"
      *ngIf="!isEditing">
      <i class="fas fa-edit"></i>
      Edit Profile
    </button>
  </div>

  <!-- Success/Error Messages -->
  <div class="alert alert-success" *ngIf="successMessage">
    <i class="fas fa-check-circle"></i>
    {{ successMessage }}
  </div>
  <div class="alert alert-error" *ngIf="errorMessage">
    <i class="fas fa-exclamation-circle"></i>
    {{ errorMessage }}
  </div>

  <form [formGroup]="accountForm" (ngSubmit)="onSubmit()">
    <div class="form-section" *ngIf="userRole === 'admin'">
      <h3>Contact Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label>Email Address *</label>
          <input 
            type="email" 
            formControlName="email" 
            class="form-input"
            readonly
            placeholder="your@email.com">
          <small class="form-hint">Email cannot be changed</small>
        </div>

        <div class="form-group">
          <label>Phone Number *</label>
          <input 
            type="tel" 
            formControlName="phone" 
            class="form-input"
            [readonly]="!isEditing"
            placeholder="+91 98765 43210">
          <div class="form-error" *ngIf="accountForm.get('phone')?.invalid && accountForm.get('phone')?.touched">
            Phone number is required
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section" *ngIf="userRole === 'company' || userRole === 'vendor'">
      <h3>Basic Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label>Email Address *</label>
          <input 
            type="email" 
            formControlName="email" 
            class="form-input"
            [readonly]="!isEditing"
            placeholder="your@email.com">
          <div class="form-error" *ngIf="accountForm.get('email')?.invalid && accountForm.get('email')?.touched">
            Valid email is required
          </div>
        </div>
      </div>
    </div>

    <div class="form-section" *ngIf="userRole === 'company' || userRole === 'vendor'">
      <h3>Company Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label>Company Name *</label>
          <input 
            type="text" 
            formControlName="companyName" 
            class="form-input"
            [readonly]="!isEditing"
            placeholder="Enter company name">
          <div class="form-error" *ngIf="accountForm.get('companyName')?.invalid && accountForm.get('companyName')?.touched">
            Company name is required
          </div>
        </div>

        <div class="form-group">
          <label>Phone Number *</label>
          <input 
            type="tel" 
            formControlName="phone" 
            class="form-input"
            [readonly]="!isEditing"
            placeholder="+91 98765 43210">
          <div class="form-error" *ngIf="accountForm.get('phone')?.invalid && accountForm.get('phone')?.touched">
            Phone number is required
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>GST Number *</label>
          <input 
            type="text" 
            formControlName="gstNumber" 
            class="form-input"
            readonly
            placeholder="29ABCDE1234F1Z5"
            maxlength="15">
          <small class="form-hint">GST number cannot be changed</small>
        </div>

        <div class="form-group">
          <label>PAN Number</label>
          <input 
            type="text" 
            formControlName="panNumber" 
            class="form-input"
            readonly
            placeholder="ABCDE1234F"
            maxlength="10">
          <small class="form-hint">PAN number cannot be changed</small>
        </div>
      </div>
    </div>

    <div class="form-actions" *ngIf="isEditing">
      <button 
        type="submit" 
        class="btn-save"
        [disabled]="isSaving || accountForm.invalid">
        <i [class]="isSaving ? 'fas fa-spinner fa-spin' : 'fas fa-save'"></i>
        {{ isSaving ? 'Saving...' : 'Save Changes' }}
      </button>
      <button 
        type="button" 
        class="btn-cancel"
        (click)="cancelEdit()"
        [disabled]="isSaving">
        <i class="fas fa-times"></i>
        Cancel
      </button>
    </div>
  </form>
</div>
